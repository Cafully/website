import{_ as s,c as a,o as n,N as l}from"./chunks/framework.1e6a71f2.js";const F=JSON.parse('{"title":"Plugin","description":"","frontmatter":{},"headers":[],"relativePath":"guide/plugin.md","lastUpdated":1679228413000}'),p={name:"guide/plugin.md"},e=l(`<h1 id="plugin" tabindex="-1">Plugin <a class="header-anchor" href="#plugin" aria-label="Permalink to &quot;Plugin&quot;">​</a></h1><p>Custom a simple plugin that print a log when the plugin is loading</p><h2 id="install" tabindex="-1">Install <a class="header-anchor" href="#install" aria-label="Permalink to &quot;Install&quot;">​</a></h2><p>Drop the plugin to the <code>plugin</code> folder</p><h2 id="custom" tabindex="-1">Custom <a class="header-anchor" href="#custom" aria-label="Permalink to &quot;Custom&quot;">​</a></h2><h3 id="create-a-project" tabindex="-1">Create A Project <a class="header-anchor" href="#create-a-project" aria-label="Permalink to &quot;Create A Project&quot;">​</a></h3><p>Create a project,Take the <code>Gradle</code> project as an example</p><div class="language-groovy"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">plugins {</span></span>
<span class="line"><span style="color:#A6ACCD;">    id </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">java</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">group </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cn.enaium.cafully</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">version </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sourceCompatibility </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> targetCompatibility </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">JavaVersion</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">VERSION_1_8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">repositories {</span></span>
<span class="line"><span style="color:#A6ACCD;">    mavenCentral</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">dependencies {</span></span>
<span class="line"><span style="color:#A6ACCD;">    compileOnly </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cn.enaium.cafully:cafully-api:1.1.1</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p>The version of the central repository</p><p><a href="https://central.sonatype.com/search?smo=true&amp;q=cafully-api" target="_blank" rel="noreferrer"><img src="https://img.shields.io/maven-central/v/cn.enaium.cafully/cafully-agent?style=flat-square" alt="Maven Central"></a></p><div class="language-groovy"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">repositories {</span></span>
<span class="line"><span style="color:#A6ACCD;">    maven { url </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://jitpack.io</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">dependencies {</span></span>
<span class="line"><span style="color:#A6ACCD;">    compileOnly </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">com.github.Cafully.cafully:cafully-api:1.1.1</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p>If you used <code>jitpack</code> also add <code>jitpack</code> repository</p><p>The version of the <code>jitpack</code> repository</p><p><a href="https://jitpack.io/#Cafully/cafully" target="_blank" rel="noreferrer"><img src="https://img.shields.io/jitpack/version/com.github.Cafully/cafully?style=flat-square" alt="JitPack"></a></p><h3 id="main-class" tabindex="-1">Main Class <a class="header-anchor" href="#main-class" aria-label="Permalink to &quot;Main Class&quot;">​</a></h3><p>Create a class <code>cn.enaium.cafully.example.Example</code>, implement <code>cn.enaium.cafully.plugin.api.IInitializer</code> interface</p><p>append <code>cn.enaium.cafully.plugin.annotation.Plugin</code> annotation</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Plugin</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">unique</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">example</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Example Plugin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">version</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">api</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&gt;=1.1.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Example</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">IInitializer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">IHelper</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">plugin</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Throwable</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><code>unique</code>The unique identity of the plugin,<code>name</code>Plugin name,<code>version</code>Plugin version,<code>api</code>API version</p><p>Invoke the <code>initialize</code> method of the plugin when the plugin is loading, and eventually the plugin will print log</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">initialize</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">IHelper</span><span style="color:#A6ACCD;"> plugin</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws Throwable </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    plugin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">plugin</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">logger</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">info</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello Example World!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="final-step" tabindex="-1">Final Step <a class="header-anchor" href="#final-step" aria-label="Permalink to &quot;Final Step&quot;">​</a></h3><p>Add the name of the main class to manifest in build config</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">jar {</span></span>
<span class="line"><span style="color:#A6ACCD;">    manifest.attributes(</span></span>
<span class="line"><span style="color:#A6ACCD;">            &#39;Manifest-Version&#39;: 1.0,</span></span>
<span class="line"><span style="color:#A6ACCD;">            &#39;Main-Class&#39;: &#39;cn.enaium.cafully.example.Example&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><p>Okay, A simple plugin is done</p>`,25),o=[e];function t(c,r,i,y,C,D){return n(),a("div",null,o)}const u=s(p,[["render",t]]);export{F as __pageData,u as default};
